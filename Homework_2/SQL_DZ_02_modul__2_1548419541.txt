Курс:
Microsoft SQL Server
Модуль: Триггеры, хранимые процедуры и пользова-
тельские функции
Тема: Триггеры
Обращаем ваше внимание, что при именовании баз дан-
ных, таблиц, столбцов и других объектов необходимо при-
держиваться рекомендаций по именованию объектов в базах
данных. Наименования объектов в заданиях даны только для
объяснения поставленной задачи.

Задание 1. К базе данных «Спортивный магазин» из практи-
ческого задания к этому модулю создайте следующие триггеры:
1. При добавлении нового товара триггер проверяет его на-
личие на складе, если такой товар есть и новые данные о
товаре совпадают с уже существующими данными, вместо
добавления происходит обновление информации о коли-
честве товара
2. При увольнении сотрудника триггер переносит информацию
об уволенном сотруднике в таблицу «Архив сотрудников»
3. Триггер запрещает добавлять нового продавца, если коли-
чество существующих продавцов больше 6.

Задание 2. К базе данных «Музыкальная коллекция» из
практического задания модуля «Работа с таблицами и пред-
ставлениями в MS SQL Server» создайте следующие триггеры:
1. Триггер не позволяющий добавить уже существующий
в коллекции альбом
2. Триггер не позволяющий удалять диски группы The Beatles
3. При удалении диска триггер переносит информацию об
удаленном диске в таблицу «Архив»
4. Триггер не позволяющий добавлять в коллекцию диски
музыкального стиля «Dark Power Pop».

Задание 3. К базе данных «Продажи» из практического
задания модуля «Работа с таблицами и представлениями в
MS SQL Server» создайте следующие триггеры:
1. При добавлении нового покупателя триггер проверяет
наличие покупателей с такой же фамилией. При нахожде-
нии совпадения триггер записывает об этом информацию
в специальную таблицу
2. При удалении информации о покупателе триггер переносит
его историю покупок в таблицу «История покупок»
3. При добавлении продавца триггер проверяет есть ли он в
таблице покупателей, если запись существует добавление
нового продавца отменяется
4. При добавлении покупателя триггер проверяет есть ли он
в таблице продавцов, если запись существует добавление
нового покупателя отменяется
5. Триггер не позволяет вставлять информацию о продаже
таких товаров: яблоки, груши, сливы, кинза.